class Solution {
public:
    void connect(TreeLinkNode *root) {
        if(!root)return;
        TreeLinkNode *p=root;
        while(p->left){
            p->left->next=p->right;
            TreeLinkNode *q=p;
            while(q->next){
                q->right->next=q->next->left;
                q->next->left->next=q->next->right;
                q=q->next;
            }
            p=p->left;
        }
    }
};
